# 临时

1. 框架各个版本特性/更新
   1. redis：https://blog.51cto.com/u_14120/7092513#
2. ES 替代方案 ManticoreSearch
3. mvnd
4. OLTP 和 OLAP
5. MySQL 的高可用方案：MHA（mha应用，关注如何切换） 和 MGR（数据强一致，要求：binlog 基于 row 格式并且需要 GTID）（https://www.cnblogs.com/xiaoyuxixi/p/13814811.html）
6. MGR + ProxySQL（类比 Nginx）
7. xxl-job 分布式调度框架
8. Keepalive + VIP + DNS
9. Service Mash、Istio
10. Oceanbase（分布式数据库）
11. Neo4J（图形数据库）
12. 服务监控
    1. [Zabbix](https://github.com/jjmartres/Zabbix)
    2. [Nagios](https://www.nagios.org/)
    3. [Metrics](https://metrics.dropwizard.io/)







MySQL

1. 开窗函数
2. 内置函数



ElasticSearch

1. 搜索聚合
2. 日志处理，时序数据处理





## 其他

js身份证校验：https://www.jianshu.com/p/444222468b0d



## 数据库

### 汇总

**关系型数据库：**

- MySQL：传统的开源关系型数据库，适用于大部分 OLTP 场景，如网站、应用后端等。
- Oracle Database： 一个商业的关系型数据库系统，在企业级应用中广泛使用，具有强大的功能和性能。
- SQL Server： 由Microsoft开发的关系型数据库，适用于Windows环境，支持广泛的业务应用。
- PostgreSQL：开源的关系型数据库系统，具有高级特性和扩展性，适用于各种应用场景。
- SQLite：一种嵌入式关系型数据库管理系统（RDBMS）。轻量级、自包含的、无服务器的数据库引擎，被设计成无需独立的服务器进程，可以直接嵌入到应用程序中使用。



**分布式关系型数据库：**

- OceanBase：阿里巴巴自主研发的分布式数据库，适用于高可用、高性能的 OLTP 场景，如金融、电商等。
- Google Spanner：由Google开发的分布式关系型数据库，适用于全球分布式的大规模应用。



**非关系型数据库：**

- MongoDB： 开源的文档型数据库，适用于灵活的数据存储和处理，常用于Web应用和移动应用。
- Cassandra：开源的分布式列式数据库，适用于大规模的分布式数据存储和处理。
- Redis（Memcached、dragonfly）：开源的键值存储数据库，适用于高速缓存和实时数据处理。
- Couchbase：支持键值和文档型数据的数据库，适用于实时应用和移动应用。



**列式数据库：**

- ClickHouse：开源的列式数据库，适用于大规模 OLAP 场景，如数据分析、报表查询等。
- Cassandra：开源的分布式列式数据库，适用于大规模的分布式数据存储和处理。



**NewSQL 数据库：**

- TiDB：分布式 NewSQL 数据库，兼容 MySQL 协议，适用于 OLTP 和 OLAP 场景，如金融、物流、大数据分析等。
- CockroachDB
- NuoDB 



**搜索引擎：**

- Elasticsearch（Lucene）：分布式搜索引擎
- ManticoreSearch



**键值存储：**

- etcd：用于分布式系统配置和服务发现的一致性键值存储，适用于构建分布式应用。



**数据仓库：**

- Hive：基于 Hadoop 的数据仓库，适用于大数据处理和分析，可用于 SQL 查询和数据ETL。



**时序数据库：**

- InfluxDB： 开源的时序数据库，适用于存储和分析时间序列数据，如传感器数据、日志等。



**图数据库：**

- Neo4j：*开源的图数据库，适用于存储和查询图结构数据，用于社交网络分析、推荐系统等。



**2. 应用场景：**

- MySQL：适用于大部分的事务性应用场景，如网站、电子商务、应用后端等，支持ACID事务。
- OceanBase：适用于高并发的事务性应用场景，如金融、电商等，提供高可用性和高性能。
- TiDB：适用于需要兼顾 OLTP 和 OLAP 的场景，如金融、物流、大数据分析等，支持分布式事务。
- ClickHouse：适用于大规模的数据分析和报表查询，对于复杂的 OLAP 查询具有出色的性能。
- etcd：适用于构建分布式系统和微服务架构，用于配置管理、服务发现等。
- Hive：适用于大数据处理和分析，可用于数据仓库、大数据ETL等场景，支持 SQL 查询。





### 中间件

数据库中间件是一种位于应用程序和底层数据库之间的软件层，用于提供数据库访问、管理和优化的功能。这些中间件可以增强数据库的性能、可伸缩性和可靠性，同时对应用程序来说是透明的。以下是一些常见的数据库中间件：

1. **MySQL Proxy：** 一个开源的数据库中间件，用于分发、负载均衡和高可用性。它可以在应用程序和 MySQL 数据库之间充当代理，从而提供故障转移和读写分离等功能。
2. **MaxScale：** 由MariaDB开发的开源数据库中间件，用于负载均衡、查询路由、故障转移和防火墙等功能。它支持多个后端数据库，如MySQL和MariaDB。
3. **ProxySQL：** 一个高性能、高可用性的开源数据库代理，专为MySQL设计。它支持负载均衡、读写分离、查询路由和缓存等功能。
4. **Tungsten Replicator：** 一个用于复制和同步数据库的开源工具，支持多个数据库平台，如MySQL、Oracle和PostgreSQL。它提供了高可用性、多源复制等功能。
5. **Vitess：** 由YouTube开发的开源数据库中间件，专为大规模、分布式的MySQL部署设计。它提供了分片、负载均衡、自动故障恢复等功能。
6. **PgPool-II：** 一个用于PostgreSQL的开源中间件，支持负载均衡、连接池、查询缓存等功能。
7. **Citus：** 一个用于PostgreSQL的开源分布式数据库中间件，可以将PostgreSQL扩展到大规模、分布式的环境中。
8. **Redis Cluster：** Redis提供的一种分布式解决方案，用于管理多个Redis节点，实现高可用性和分片。
9. **TiDB：** 一个分布式的NewSQL数据库，兼容MySQL协议，适用于在线事务处理（OLTP）和在线分析处理（OLAP）。



**分片功能（Sharding）：**

1. **MyCAT：** 开源的数据库中间件，专为大规模MySQL数据库部署设计。提供分库分表、负载均衡、高可用性等功能。
2. **ShardingSphere (Sharding-JDBC)：** 支持数据库分片的核心组件，适用于关系型数据库。提供透明的分片路由、读写分离、分布式事务等特性。

**读写分离和负载均衡功能：**

1. **MyCAT：** 除了分片功能外，也支持负载均衡和读写分离。
2. **ProxySQL：** 高性能的数据库代理，支持负载均衡和读写分离，专为MySQL设计。
3. **ShardingSphere (Sharding-Proxy)：** 充当应用程序与数据库之间的代理，实现分片和读写分离。支持多种数据库协议和通信方式。

**高可用性和故障转移功能：**

1. **MyCAT：** 支持数据复制和故障转移，当节点发生故障时，可以自动切换到其他可用节点。
2. **ProxySQL：** 支持自动故障转移，可以在数据库节点发生故障时切换到备用节点。

**分布式事务功能：**

1. **ShardingSphere (Sharding-JDBC)：** 支持分布式事务，可以在分片环境中处理跨分片的事务。

**云原生支持功能：**

1. **ShardingSphere (Sharding-Sidecar)：** 适用于 Kubernetes 和 Service Mesh 的组件，将 Sharding-JDBC 集成到云原生应用中，实现分片和读写分离。



### NewSQL

NewSQL 是一类新型的关系型数据库管理系统（RDBMS），旨在解决传统关系型数据库在大规模、高并发、分布式等方面的挑战。NewSQL 数据库在保留传统关系型数据库的特性和ACID事务支持的基础上，引入了新的架构和技术，以满足现代应用的需求。

传统关系型数据库（如MySQL、Oracle）在面对大规模数据处理和高并发访问时，可能会遇到性能瓶颈。这时，传统数据库可能需要进行垂直扩展（增加硬件资源）来应对，但这在某些情况下会变得昂贵且不够灵活。NewSQL 数据库则试图通过创新性的方法来解决这些问题。

以下是一些 NewSQL 数据库的特点和目标：

1. **分布式架构：** NewSQL 数据库通常采用分布式架构，可以将数据分布在多个节点上，以实现水平扩展和负载均衡。
2. **高可用性：** 许多 NewSQL 数据库支持高可用性特性，包括故障转移、自动切换等，以保障数据库的稳定性。
3. **性能优化：** NewSQL 数据库引入了新的查询优化和执行策略，以提供更好的性能，尤其是在复杂查询和大数据量情况下。
4. **分布式事务：** NewSQL 数据库致力于在分布式环境中实现ACID事务，以保证数据的一致性和可靠性。
5. **弹性扩展：** NewSQL 数据库支持动态添加节点，实现弹性扩展，以适应数据量和负载的变化。
6. **多模型支持：** 一些 NewSQL 数据库支持多种数据模型，包括关系型、文档型、键值型等。
7. **OLAP/OLTP 支持：** 一些 NewSQL 数据库旨在兼顾在线事务处理（OLTP）和在线分析处理（OLAP），提供综合的数据处理能力。

一些 NewSQL 数据库的例子包括 TiDB、CockroachDB、NuoDB 等。这些数据库系统在不同的场景下可以提供高性能、高可用性和分布式能力，是应对现代应用挑战的解决方案之一。需要注意的是，尽管 NewSQL 数据库提供了许多创新性的特性，但在选择数据库系统时仍需要根据业务需求进行评估和测试。





### 加锁

在 MySQL 中执行 `DELETE FROM table WHERE id = 1` 语句时，涉及到的锁的类型和加锁方式会取决于当前的事务隔离级别以及表的存储引擎。MySQL 支持多种事务隔离级别和存储引擎，因此锁的行为会有所不同。

以下是在不同情况下可能涉及的加锁情况：

1. **事务隔离级别：**
   - 在读未提交（Read Uncommitted）隔离级别下，不会对读取的数据加任何锁。
   - 在读已提交（Read Committed）隔离级别下，可能会对读取的数据行加记录锁，防止其他事务修改该行。
   - 在可重复读（Repeatable Read）隔离级别下，会对读取的数据行加记录锁，同时还可能会在查询过程中对范围内的键值加共享锁。
   - 在串行化（Serializable）隔离级别下，会对读取的数据行加记录锁，并在查询过程中对范围内的键值加共享锁。
2. **存储引擎：**
   - 对于 InnoDB 存储引擎，DELETE 操作通常会对被删除的行加排他锁（X 锁）以保证事务的隔离性，同时会根据事务隔离级别决定是否对其他行加锁。
   - 对于 MyISAM 存储引擎，整个表会被加写锁，阻止其他事务的写操作。

需要注意的是，MySQL 的锁机制是复杂的，受到事务隔离级别、存储引擎和具体的操作语句等因素影响。正确理解锁的行为对于维护数据的一致性、避免死锁等问题至关重要。在实际应用中，应根据具体的业务需求和并发访问情况，选择合适的事务隔离级别以及适当的加锁策略。





### 主从复制

在 MySQL 和 Redis 中，数据同步的方式略有不同：

**MySQL 数据同步：** MySQL 中的数据同步是通过主从复制实现的。在 MySQL 主从复制中，主库主动推送数据变更到从库，从库被动接收并应用这些变更。主库会将数据更改记录在 binlog（二进制日志）中，从库会连接到主库并解析 binlog 来获取数据更改，然后在从库上应用这些变更以保持数据一致性。因此，MySQL 数据同步是主库主动推送数据给从库。

**Redis 数据同步：** Redis 中的数据同步主要涉及主从复制和哨兵模式。在 Redis 主从复制中，主库将写入的数据更改发送给从库。主库定期生成 RDB 快照（持久化快照）并发送给从库，同时持续地将写命令发送给从库，使从库能够重放这些命令以保持数据一致性。因此，Redis 的主从复制是通过主库将数据变更推送给从库。

此外，在 Redis 的哨兵模式中，哨兵会监控主库的状态，当主库不可用时，哨兵会从从库中选举出新的主库，并将其他从库切换到新的主库上。这也涉及到主从之间的数据同步。

总结：在 MySQL 和 Redis 中，数据同步都是通过主从复制来实现的，主库会主动推送数据变更给从库。这些机制都旨在保持数据的一致性和可靠性，确保主库和从库之间的数据保持同步。