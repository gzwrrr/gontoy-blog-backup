---
title: "Linux 命令整理"
shortTitle: "Linux 命令整理"
description: "Linux 命令整理"
icon: ""
author: 
  name: gzw
  url: 
  email: 1627121193@qq.com
isOriginal: false
date: 2022-08-10
category: 
- "linux"
- "运维"
tag:
- "linux"
- "运维"
sticky: 1
star: false
article: true
timeline: true
dir:
  text: "Linux 命令整理"
  icon: ""
  collapsible: true
  index: true
  comment: true
headerDepth: 3
index: true
order: 2
copy:
  triggerWords: 100
  disableCopy: false
  disableSelection: false
feed:
  title: "Linux 命令整理"
  description: "Linux 命令整理"
  author:
    name: gzw
    email: 1627121193@qq.com
---





# Linux命令整理



[[toc]]



## 1.关机指令

- `sync` 将数据由内存同步到硬盘中
- `shutdown` 关机指令，可以用man shutdown看一下所有的关机指令
- `shutdown -h 10` 计算机10秒后关机
- `shutdown -h now` 立即关机
- `shutdown -h 20 : 00` 在今天的20 : 00关机
- `shutdown -h +10` 十分钟后关机
- `shutdown -r now` 系统立即重启
- `shutdown -r +10` 系统10分钟过后重启
- `reboot` 重启命令，等同于 `shutdown -r now` 
- `halt` 关闭系统，等同于`shutdown -h now` 和 `poweroff`

==注：不管是重启还是关闭系统，都需要首先运行`sync`命令，即把内存中的数据存储到磁盘中==





## 2.系统目录结构

> 1.一切皆文件
>
> 2.根目录/，所有的文件都挂载在这个节点下

### 对目录的解释

- ==**/root** : 该目录为系统管理员，也称作超级权限者的用户主目录==
- ==**/etc** : 这个目录用来存放所有的系统管理所需要的配置文件和子目录==
- ==**/home** : 用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的==
- ==**/tmp** : 这个目录是用来存放一些临时文件的，用完即丢的文件可以放在这个目录下，例如安装包==
- ==**/usr** : 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录==
- ==**/opt** : 这个是主机额外安装软件所摆放的目录，默认为空==
- ==**/www** : 存放服务器网站相关的资源，环境，网站的项目（LNMP就放在其server/目录里）==
- ==**/var** : 这个目录存放着在不断扩充的东西，我们习惯将那些经常被修改的文件放在这个目录下，包括各种日志文件==

- **/bin** :  bin是binary的缩写，这个目录存放着最经常使用的命令
- **/boot** : 这里存放这启动Linux时使用的一些核心命令 **（不能动）**
- **/dev** : dev是device的缩写，存放的是Linux的外部设备（例如U盘），在Linux中访问设备的方式和访问文件的方式是相同的
- **/lib** : 这个目录存放着系统最基本的动态连接共享库，其作用类似与Windows系统中的dll文件 **（不能动）**
- **/lost+found** : 这个目录一般情况下是空的，当系统非法关机后，这里就存放着一些文件
- **/media** : Linux系统会自动识别一些设备，例如U盘、光驱等，当识别后，就会把设备挂载到这个目录下
- **/mnt** : 系统提供该目录是为了用用户临时挂载别的文件系统，我们可以将光驱挂载到/mnt/上，然后进入该目录就可以查看光驱里面的内容了（也会把一些本地文件挂载在这个目录下）
- **/proc** : 这个目录是一个虚拟的目录，他是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息
- **/sbin** : s就是super user的意思，这里存放的是系统管理员使用的系统管理程序
- **/srv** : 该目录存放一些服务启动之后需要提取的数据
- **/sys** : 这里是Linux2.6内核的一个很大的变化，该目录下安装了新出现的一个系统文件sysfs
- **/usr/bin** : 系统用户使用的应用程序
- **/usr/sbin** : 超级用户使用的比较高级的管理程序和系统守护程序
- **/usr/src** : 内核源代码默认的放置目录
- **/run** : 这个是一个临时文件系统，存储系统启动以来的信息，当系统重启时，这个目录下的文件应该被删除或清除





## 3.常用的基本命令

### 3.1 目录相关命令

#### 3.1.1 清理

- `clear` 清屏



#### 3.1.2 切换

- `cd` 切换，目录命令
- `./` 当前目录
- `cd ..` 返回上一级目录
- `cd ~` 进入用户目录（/root）



#### 3.1.3 查看

- `ls` 列出目录（最常使用的命令）
- `pwd` 显示当前所处的目录



#### 3.1.4 创建与删除

- `mkdir 目录名 ` 创建单级目录
- `mkdir -p 目录/目录/...` 递归创建多级目录
- `rmdir 目录` 删除空目录
- `rmdir -p 目录/目录/...` 删除多级目录
- `rm` 移除目录或文件
- `rm -rf` 极其危险，可以强制删除任何文件，尤其是不能使用 `rm -rf /*` 命令，这会删除所有的文件，最终导致系统崩溃 



#### 3.1.5 移动/重命名文件或者目录

- `mv 被移动的目录或文件名 进入的文件名/`
- `mv 被重命名的文件 新文件名`     



#### 3.1.6 复制

- `cp 被拷贝的文件 拷贝进入的目录` 复制文件



### 3.2 各种参数

==注：所有的参数都可以组合使用==

- `-a` all，查看所有的文件，包括隐藏文件
- `-l` list，列出除颖仓文件外的所有文件，包括文件的属性和权限
- `-p` 配合创建或删除多级目录
- `-f` 忽略不存在的文件，删除时不会出现警告，即强制删除
- `-R` 递归更改文件属性 
- `-r` 递归，递归删除目录
- `-i` 互动，删除时询问是否删除
- `-n` 与查看文件命令搭配，指定查看的总行数
- `-s` 辅助创建软链接



### 3.3 文件/目录的基本属性

==注：用-l参数后才能显示==

图片：

示例（重点 ）：

属性|属主|属组|大小|时间|文件/目录名
:---:|:---:|:---:|:---:|:---:|:---:
drwxrwxrwx|root|root|4096|Feb 20 10 : 00|boot
l---r-xr-x|root|usr|7|Feb 20 12 : 00|bin -> usr/bin



#### 3.3.1 表示的含义

==注：第一个字母==

- `d` 目录
- `-` 文件
- `l` 链接文档（link file）
- `b` 装置文件里面的可提供储存的接口设备（可随机存储装置）
- `c` 则表示为装置文件里面的串行端口设备，例如鼠标、键盘（一次性读取装置）
- `->` 链接指向的地方



#### 3.3.2 权限
==注：后九个字母，三个为一组，每组分别对应owner/group/others，三种身份有着各自的权限==

- `r` 可读，权重为4
- `w` 可写，权重为2
- `x` 可执行，权重为1
- `-` 无权限，权重为0

**注：单个身份最高权限对应的权重为7**



#### 3.3.3 修改文件属性

- `chgrp -R 新组 文件或目录名` 更改组
- `chown -R 新主 文件或目录名` 更改主  
- `chmod -R xyz 文件或目录名` 更改文件的属性

**注：`chmod -R 777 文件或目录名` 表示最高权限**



### 3.4 文件内容查看

注：**下面命令后+文件名**

+ `cat` 由第一行开始显示文件内容
+ `tac` 从最有一行开始显示文件内容
+ `nl` 显示的时候顺道输出行号
+ `more` 一页一页地显示文件内容（空格代表翻页，回车代表向下看一行，f代表显示当前行号）
+ `less` 与`more`类似，但是less可以往前翻页==（空格翻页，上下键翻动页面，q退出，/关键字+回车查找文件中的字符串，继续用n表示寻找下一个，N表示寻找上一个）==
+ `head -n 20` 只看头20行
+ `tail -n 10` 只看尾10行 

可以使用man[命令]来查看各个命令的使用文档，如`man cp`



### 3.5 文件相关命令

#### 3.5.1 创建与删除

| 序号 | 语法                         | 解释               |
| ---- | ---------------------------- | ------------------ |
| 1    | `touch 文件名`               | 创建文件           |
| 2    | `echo "插入语句" >> 文件名 ` | 向指定文件插入语句 |



### 3.6 Linux的链接

> Linux的链接分为两种：硬链接、软链接

- 硬链接：`A---B` 假设B是A的硬链接，那么他们两个指向了同一个文件，即允许一个文件拥有多个路劲，用户可以通过这种机制建立硬链接到一些重要文件上，==防止误删==

- 软链接：类似Windows下的快捷方式，删除源文件，那么快捷方式也不能访问

  #### 3.5.1 **创建的语法**

  | 序号 | 语法                    | 解释                  |
  | ---- | ----------------------- | --------------------- |
  | 1    | `ln 文件名1 文件名2`    | 创建硬链接（文件名2） |
  | 2    | `ln -s 文件名1 文件名2` | 创建软链接（文件名2） |

  



## 4.VIM编辑器

==vim键盘图==

![image-20230209011324200](https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//linux/20230209/vim%E7%BC%96%E8%BE%91%E5%99%A8%E9%94%AE%E4%BD%8D.png)



### 4.1 vim相关知识

#### 4.1.1 三种使用模式

- 命令模式（command mode）
- 输入模式（Insert mode）
- 底线命令模式（Last line mode）





#### 4.1.2 三种模式的相关指令

**（1）命令模式：**

​		==用户刚进入vim时是命令模式，不能编辑==，此模式下，敲击键盘会被识别为命令，不会输入字符

| 序号 | 命令 | 解释                                                         |
| ---- | ---- | ------------------------------------------------------------ |
| 1    | i    | 切换到输入模式输入字符                                       |
| 2    | x    | 删除当前光标所处的子字符                                     |
| 3    | :    | 切换到底线命令模式，以在最底下一行输入更多命令。如果处在编辑模式则需要先按下esc退出 |

**（2）底线命令模式：**

| 序号 | 命令 | 解释     |
| ---- | ---- | -------- |
| 1    | w    | 保存文件 |
| 2    | q    | 文件     |

**常常使用 `wq` 保存并退出**







## 5.账号管理

### 5.1 增删改操作

| 序号 | 语法                            | 解释                             |
| ---- | ------------------------------- | -------------------------------- |
| 1    | `useradd -参数 用户名`          | 添加用户                         |
| 2    | `userdel 用户名`                | 删除用户（一般加-r参数清理文件） |
| 3    | `usermod 修改的内容 修改的用户` | 修改用户                         |
| 4    | `su 用户名`                     | 切换用户                         |
| 5    | `passwd 用户名`                 | 设置密码（root用户）             |
| 6    | `passwd`                        | 设置摩玛（普通用户）             |
| 7    | `passwd -l 用户名`              | root用户冻结普通用户             |
| 8    | `passwd -d 用户名`              | 没有密码的用户也不能登录         |
| 9    | `passwd -u 用户名`              | 解冻用户                         |

**参数说明**

| 序号 | 参数 | 解释                                                         |
| ---- | ---- | ------------------------------------------------------------ |
| 1    | `-m` | 使用者目录如果不存在则自动创建                               |
| 2    | `-c` | 指定一段注释性描述                                           |
| 3    | `-d` | 指定用户目录，如果此目录不存在则同时使用`-m`选项             |
| 4    | `-g` | 指定用户所属的用户组                                         |
| 5    | `-G` | 指定用户所属的附属组                                         |
| 6    | `-s` | 指定用户的登录shell                                          |
| 7    | `-u` | 指定用户的用户号，如果同时有 `-o` 选项，则可以重复其他用户的表示号 |
| 8    | `-l` | 冻结用户                                                     |
| 9    | `-u` | 解冻用户                                                     |



### 5.2 用户组管理

| 序号 | 语法                            | 解释              |
| ---- | ------------------------------- | ----------------- |
| 1    | `groupadd 用户组`               | 添加用户组        |
| 2    | `groupadd -g 500 用户组`        | 指定用户组id为500 |
| 3    | `groupdel 用户组`               | 删除用户组        |
| 4    | `groupmod -g id -n 新名 用户组` | 修改用户组        |



## 6.磁盘管理

| 序号 | 语法         | 解释                                           |
| ---- | ------------ | ---------------------------------------------- |
| 1    | `df`         | 列出文件系统整体的磁盘使用量（一般搭配-h使用） |
| 2    | `du`         | 检查磁盘空间文件具体占用的容量                 |
| 3    | `du -sm /* ` | 检查根目录下每个文件占用的容量                 |



## 7.进程管理

| 序号 | 语法             | 解释                                   |
| ---- | ---------------- | -------------------------------------- |
| 1    | `ps`             | 查看当前系统中正在执行的各种进程的信息 |
| 2    | `ps -ef`         | 查看父进程的信息                       |
| 3    | `pstree -pu`     | 显示进程目录树                         |
| 4    | `kill -9 进程id` | 强制杀死进程                           |

- **参数解释**

| 序号 | 参数 | 解释                           |
| ---- | ---- | ------------------------------ |
| 1    | `-a` | 显示当前终端运行的所有进程信息 |
| 2    | `-u` | 以用户的信息显示进程           |
| 3    | `-x` | 显示后台运行进程的参数         |
| 4    | `-p` | 显示父id                       |
| 5    | `-u` | 显示用户组                     |

- **示例**

| 序号 | 命令                  | 解释                          |
| ---- | --------------------- | ----------------------------- |
| 1    | `ps -aux|grep mysql ` | 过滤出只跟mysql相关的进程信息 |



## 8.环境安装

> 安装软件一般有三种方式：rpm、解压缩、yum在线安装

### 8.1 rpm

| 序号 | 命令                             | 解释               |
| ---- | -------------------------------- | ------------------ |
| 1    | `rpm -ivk xxx.rpm`               | 安装程序           |
| 2    | `rpm -qa|grep 需要查看的程序`    | 检测是否有相关程序 |
| 3    | `rpm -e --nodeps 需要删除的程序` | 强制删除程序       |



### 8.2 解压缩

| 序号 | 命令                   | 解释     |
| ---- | ---------------------- | -------- |
| 1    | `tar -zxvf xxx.tar.gz` | 解压文件 |



### 8.3 yum在线安装

| 序号 | 命令                  | 解释                         |
| ---- | --------------------- | ---------------------------- |
| 1    | `yum -y install 包名` | 在线安装并自动确认所有的提示 |



### 8.4 其他

| 序号 | 命令                    | 解释           |
| ---- | ----------------------- | -------------- |
| 1    | `source 配置文件的地址` | 让配置文件生效 |



## 其他

### 1.1 网络相关（CentOS 7）

- 网络配置所在的目录：`/etc/sysconfig/network-scripts/ifcfg-eth0`
- `ifconfig` 查看网络配置



### 2.2 管道符 `|` 

- 管道符可以将前面参数执行后得到的结果传递给后面的参数操作，一般用于过滤信息
