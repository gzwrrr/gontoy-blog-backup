---
title: "架构设计相关"
shortTitle: "架构设计相关"
description: "架构设计相关"
icon: ""
author: 
  name: gzw
  url: 
  email: 1627121193@qq.com
isOriginal: false
date: 2022-09-21
category: 
- "架构"
- "通用"
tag:
- "架构"
- "通用"
sticky: 1
star: false
article: true
timeline: true,
dir:
  text: "架构设计相关"
  icon: ""
  collapsible: true
  index: true
  comment: true
headerDepth: 3
index: true
order: 2
copy:
  triggerWords: 100
  disableCopy: false
  disableSelection: false
feed:
  title: "架构设计相关"
  description: "架构设计相关"
  author:
    name: gzw
    email: 1627121193@qq.com
---

# 架构设计相关


贫血模型：

- 事务脚本模式
- 只有状态的对象（VO，Value Object）就是贫血对象
- 这是一种面向对象设计的反模式

- 贫血领域模型的根本问题：它引入了领域模型设计的所有成本，却没有带来任何好处。最主要的成本是将对象映射到数据库中，从而产生了一个O/R（对象关系）映射层。
- 贫血模型会使得所有的业务逻辑放在服务层，这便成为了面向过程设计，失去了领域模型面向对象编程的好处
- 对于少量的业务逻辑来说，贫血模型使用起来会非常自然且容易，开发也更为迅速和易于理解
- 但是当业务逻辑变得复杂之后，就可能需要更改之前写好的业务逻辑，从这个层面来说是不符合基本的设计原则的



充血模型：

- 领域模型模式
- 对象拥有属性和行为
- 这是一种更加符合直觉的模式（其实就是 OOP）
- 虽然符合面向对象，但是充血模型需要预先设计好，即需要将业务的部分逻辑拆解分离后放入到拥有行为的对象中，这点是较难实现的
- 当使用充血模型时，如果一个对象包含了其他对象，那么就需要将职责继续委派下去，由具体的 POJO 执行业务逻辑，这是让策略模式更加细粒度，从而在一定程度上避免使用大量的 if-else



SOA（面向服务架构） / ESB（企业服务总线）/ BPM（业务流程管理）：1.0 微服务架构，高度中心化，外部解耦但是内部复杂



DDD（领域驱动she'ji）：模型层比较厚，使用充血模型（MVC 中使用贫血模型）





传统架构经历的三个阶段：

- UI + Database 的两层架构（面向数据库的结构，几乎没有灵活性）
- UI + Service + Database 的多层 SOA 架构（面向服务的架构，service 层臃肿）
- 分布式微服务架构（粒度切分难以界定，根本问题在于业务边界和应用边界模糊难以界定）



DDD 的核心：

通过领域驱动设计方法定义领域模型，从而确定业务和应用边界，保证业务模型与代码模型的一致性（建立正确的领域模型）

**落地困难**



