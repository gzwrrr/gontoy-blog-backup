import{_ as o,Q as l,S as p,U as n,a4 as a,W as t,a5 as s,H as c}from"./framework-ec2af7a3.js";const i={},u=s('<h1 id="java监控" tabindex="-1"><a class="header-anchor" href="#java监控" aria-hidden="true">#</a> Java监控</h1><h1 id="java-远程监控" tabindex="-1"><a class="header-anchor" href="#java-远程监控" aria-hidden="true">#</a> Java 远程监控</h1><h2 id="写在前面" tabindex="-1"><a class="header-anchor" href="#写在前面" aria-hidden="true">#</a> 写在前面</h2><blockquote><p>本文对 Java 程序进行远程监控的简单记录（使用虚拟机模拟远程服务器）</p></blockquote><h2 id="_1-准备步骤" tabindex="-1"><a class="header-anchor" href="#_1-准备步骤" aria-hidden="true">#</a> 1.准备步骤</h2>',5),r=n("li",null,"在虚拟机上安装 Linux（选用 CentOS7），使用最小安装，最小安装后会缺少很多常用的工具，需要用 yum 包管理工具下载",-1),d={href:"https://blog.csdn.net/twilight1999/article/details/123867565?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165640311216782388096841%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=165640311216782388096841&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~pc_rank_34-5-123867565-null-null.142%5Ev24%5Epc_rank_34,157%5Ev15%5Enew_3&utm_term=centos7%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF&spm=1018.2226.3001.4187",target:"_blank",rel:"noopener noreferrer"},k=n("li",null,[a("二是直接下载 Linux 自带的上传下载工具："),n("code",null,"yum install -y lrzsz")],-1),m=s("<li>编辑环境变量需要下载文本编辑器（选用 vim）：<code>yum -y install vim</code></li><li>编辑 <code>/etc/profile</code> 文件：<code>vim /etc/profile</code>，在文件最后加入路径</li><li>安装 Java 环境后报错找不到文件，需要下载相应工具：<code>yum install glibc.i686</code></li><li>检查 Java 环境配置完成：<code>java -version</code></li>",4),v=s(`<p>【补充】配置文件中的 JDK 路径</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java（包名随意改，能对应上就行，其中应该包含 JDK 的 bin、lib 等目录文件，剩下的无需更改）
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/jre
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-远程监控" tabindex="-1"><a class="header-anchor" href="#_2-远程监控" aria-hidden="true">#</a> 2.远程监控</h2>`,3),h={href:"https://blog.csdn.net/su371128017/article/details/111059302",target:"_blank",rel:"noopener noreferrer"},b=s(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RemoteMonitorTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 测试线程1</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 测试线程2</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),g=n("li",null,[n("p",null,[a("在本地主机（windows）上键入 "),n("code",null,"win + R"),a("，输入 "),n("code",null,"jconsole"),a(" 打开 Java 自带的监控工具，如果没有要检查 Java 环境是否配置好了")])],-1),_=n("figure",null,[n("img",{src:"https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//java监控/20230212/1.png",alt:"image-20220628181250186",tabindex:"0",loading:"lazy"}),n("figcaption",null,"image-20220628181250186")],-1),y=n("figure",null,[n("img",{src:"https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown/https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//java监控/20230212/2.png",alt:"image-20220628181330428",tabindex:"0",loading:"lazy"}),n("figcaption",null,"image-20220628181330428")],-1),f={start:"2"},w=s(`<li><p>在 Linux 服务器（CentOS7）上输入以下命令允许远程连接，输入命令时要在测试文件所在的目录下（或者在命令的最后写上全路径），并且要确保已存在测试文件的字节码文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-Djava.rmi.server.hostname</span><span class="token operator">=</span>Linux主机ip <span class="token parameter variable">-Dcom.sun.management.jmxremote</span> <span class="token parameter variable">-Dcom.sun.management.jmxremote.port</span><span class="token operator">=</span>任意端口（用于远程连接） <span class="token parameter variable">-Dcom.sun.management.jmxremote.ssl</span><span class="token operator">=</span>false <span class="token parameter variable">-Dcom.sun.management.jmxremote.authenticate</span><span class="token operator">=</span>false 程序名
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown/https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown/https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//java监控/20230212/3.png" alt="image-20220628181512365" tabindex="0" loading="lazy"><figcaption>image-20220628181512365</figcaption></figure></li><li><p>在本地主机的 <code>jconsole</code> 中输入 <code>主机ip:端口</code> 进行连接</p></li><li><p>如果发现连接不上先检查防火墙是否未关闭，如果没关闭则使用命令：<code>systemctl stop firewalld</code> （不同版本 CentOS 的防火墙命令不太一样，根据版本找到对应的即可），再重新输入第二点的命令</p></li>`,3),x={href:"https://blog.csdn.net/cyq1984/article/details/5766776",target:"_blank",rel:"noopener noreferrer"},E=n("li",null,[n("p",null,"连接成功后观测一段时间便得到了如下结果"),n("figure",null,[n("img",{src:"https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown/https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown/https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown/https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//java监控/20230212/4.png",alt:"image-20220628183243643",tabindex:"0",loading:"lazy"}),n("figcaption",null,"image-20220628183243643")])],-1);function j(A,J){const e=c("ExternalLinkIcon");return l(),p("div",null,[u,n("ol",null,[r,n("li",null,[a("在系统上配置 Java 环境，首先需要将 JDK 传输到虚拟机中，有两种方法： "),n("ul",null,[n("li",null,[a("一是使用虚拟机自带的共享目录功能："),n("a",d,[a("引用 CSND 用户：twilight1999（https://blog.csdn.net/twilight1999）的文章"),t(e)])]),k])]),m]),v,n("ol",null,[n("li",null,[n("p",null,[a("将测试代码上传到 Linux 上，测试代码如下。注意不要加上包名，如果加上则参照："),n("a",h,[a("CSDN 用户：su371128017（https://blog.csdn.net/su371128017）的文章"),t(e)]),a("，此外，Java 环境路径中 CLASSPATH 一定要配置，否则编译后运行可能会报找不到执行文件的错误")]),b]),g]),_,y,n("ol",f,[w,n("li",null,[n("p",null,[a("如果还是不能连接，可能是 Linux 服务器的 ip 地址出错，参照："),n("a",x,[a(" CSDN 用户：mortimer_c（https://blog.csdn.net/cyq1984）的文章"),t(e)])])]),E])])}const S=o(i,[["render",j],["__file","Java监控.html.vue"]]);export{S as default};
